<!doctype html><html lang=en-us><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=x-ua-compatible content="IE=edge"><style type=text/css>body{font-family:monospace}</style><title>Djangoæµ…è°ˆ</title><link rel=stylesheet href=/css/style.css></head><body><header>===================<br>== <a href=https://blog.peterchen.xyz/>é¢¢é˜³'s Blog</a> ==<br>===================<div style=float:right>blog for everything</div><br><p><nav><a href=/><b>Start</b></a>.
<a href=/posts/><b>Posts</b></a>.
<a href=/reads/><b>Reads</b></a>.
<a href=/categories/><b>Categories</b></a>.
<a href=/tags/><b>Tags</b></a>.</nav></p><script>MathJax={tex:{inlineMath:[['$','$'],['\\(','\\)']],displayMath:[['$$','$$'],['\\[','\\]']],processEscapes:!0,processEnvironments:!0},options:{skipHtmlTags:['script','noscript','style','textarea','pre']}},window.addEventListener('load',a=>{document.querySelectorAll("mjx-container").forEach(function(a){a.parentElement.classList+='has-jax'})})</script><script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script><script type=text/javascript id=MathJax-script async src=https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js></script><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=manifest href=/site.webmanifest></header><main><article><h1>Djangoæµ…è°ˆ</h1><p><b>Posted
on <time>06.20.2017 10:57</time>
in
<a href=/categories/tech>tech</a></b>
â€¢ 1351 words
â€¢ 3 minute read<br>Tags:
<a href=/tags/django>Django</a></p><div><h2 id=djangoä¸ºä½•ç‰©>Djangoä¸ºä½•ç‰©</h2><p><a href=https://www.djangoproject.com/>Django</a>æ˜¯åœ¨ç½‘é¡µå¼€å‘ä¸­æ¯”è¾ƒå¸¸ç”¨çš„ä¸€ä¸ªæ¡†æ¶ï¼Œä¸»è¦å¸®åŠ©æ­å»ºä¸€ä¸ªç±»ä¼¼MVCçš„workflow. å…å»äº†å¾ˆå¤šç¹ççš„ç½‘é¡µç•Œé¢äº¤äº’çš„é—®é¢˜ï¼Œä½œè€…è¿˜ç‰¹åˆ«åœ¨å®˜ç½‘ä¸Šå†™</p><blockquote><p>The web framework for perfectionists with deadlines.</p></blockquote><p>æ„æ€å°±æ˜¯ä¸ºè¿½æ±‚å®Œç¾å´åˆè¢«è¿«åœ¨deadlineä¹‹å‰å®Œæˆæ‰€å‡†å¤‡çš„ä¸€ä¸ªå·¥å…·ã€‚</p><h2 id=ç¯å¢ƒæ­å»º>ç¯å¢ƒæ­å»º</h2><p>ä½œä¸º<a href=https://www.continuum.io/Anaconda-Overview>anaconda</a>çš„å¿ å®ç²‰ä¸ï¼Œåœ¨Linuxçš„æ“ä½œç¯å¢ƒä¸­æˆ‘è¿˜æ˜¯åœ¨æ­¤å®‰åˆ©ä¸€æ³¢ã€‚è¿˜è®°å¾—å»å¹´ç”¨scrapyå†™çˆ¬è™«çš„æ—¶å€™ä¸ºäº†å®‰è£…ä¾èµ–èµ°äº†å¾ˆå¤šå¼¯è·¯ï¼Œç”±äºå½“æ—¶ä½¿ç”¨çš„æ˜¯<a href=https://brew.sh/>homebrew</a>ï¼Œbrewé‡Œé¢å¹¶æ²¡æœ‰srcapyï¼Œäºæ˜¯åˆç ”ç©¶äº†å¥½åŠå¤©è®¾ç½®ç¯å¢ƒå˜é‡ç­‰é‡åˆ°çš„ç§ç§é—®é¢˜ï¼Œæœ€ç»ˆè¿˜æ˜¯æ”¾å¼ƒäº†å†³å®šå®‰è£…ubuntuæ‰æå®šã€‚åæ¥å¾ˆå¶ç„¶çš„åœ¨å¾®ä¿¡ä¸Šçœ‹åˆ°äº†anacondaæ‰å‘ç°è‡ªå·±å¥½è ¢â€¦â€¦</p><p>æ‰€ä»¥å®‰è£…anacondaæ˜¯ä¸ºäº†åœ¨è‡ªå·±å–œæ¬¢çš„pythonç¯å¢ƒä¸­è¿›è¡Œå¼€å‘ï¼Œæœ¬æ–‡è®²çš„å†…å®¹ä¹Ÿéƒ½æ˜¯åœ¨python3çš„ç¯å¢ƒä¸‹å¼€å‘ã€‚
é¦–å…ˆé€‰æ‹©è¦ä½¿ç”¨çš„pythonç¯å¢ƒï¼Œå¦‚æœæ˜¯anacondaå¯ç”¨çš„æ–¹æ³•æ˜¯ï¼š</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>$ source activate <span style=color:#e6db74>&#39;your-env-name&#39;</span>
</code></pre></div><p>ç„¶åä½¿ç”¨pipå®‰è£…djangoï¼ˆç›®å‰æœ€æ–°ç‰ˆæœ¬æ˜¯1.11.2):</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>$ pip install Django<span style=color:#f92672>==</span>1.11.2
</code></pre></div><p>æ£€æŸ¥å®‰è£…ï¼š</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=color:#f92672>&gt;&gt;&gt;</span> <span style=color:#f92672>import</span> django
<span style=color:#f92672>&gt;&gt;&gt;</span> <span style=color:#66d9ef>print</span>(django<span style=color:#f92672>.</span>get_version())
<span style=color:#ae81ff>1.11</span>
</code></pre></div><p>æˆ‘æ¯”è¾ƒå–œæ¬¢çš„IDEæ˜¯Jetbrainçš„<a href=https://www.jetbrains.com/pycharm/>PyCharm CE</a>ï¼Œä¸ªäººè®¤ä¸ºCEå·²ç»å®Œå…¨æ»¡è¶³æˆ‘çš„éœ€è¦äº†ã€‚</p><p>ç„¶åå°±å¯ä»¥cdåˆ°è‡ªå·±çš„ç›®å½•ä¸‹å¼€å§‹åˆ›å»ºdjango web appäº†ï¼</p><h2 id=ä½¿ç”¨>ä½¿ç”¨</h2><p>åœ¨è‡ªå·±çš„ç›®å½•ä¸‹ä½¿ç”¨æŒ‡ä»¤ï¼š</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>$ django-admin startproject mysite
</code></pre></div><p>ä¹‹åä¼šåˆ›å»ºä¸€ä¸ªå«mysiteçš„æ–‡ä»¶å¤¹ï¼Œé‡Œé¢çš„ä¸œè¥¿é•¿è¿™æ ·ï¼š</p><pre><code>mysite/
    manage.py
    mysite/
        __init__.py
        settings.py
        urls.py
        wsgi.py
</code></pre><p>æœ€æœ‰ç”¨çš„manage.pyå¯ä»¥å¸®åŠ©ä½ åœ¨command lineä¸­å¼€å¯æœåŠ¡å™¨ï¼Œè¿›å…¥å¯¹åº”çš„python shellå»æµ‹è¯•ç”Ÿäº§çš„modelsçš„çŠ¶å†µã€‚</p><ul><li>å¯åŠ¨serverï¼š</li></ul><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>$ ./manage.py server
</code></pre></div><p><strong>è¿™æ ·é»˜è®¤åœ¨127.0.0.1çš„8000ç«¯å£å¼€å¯ï¼Œå¦‚æœæƒ³å†åˆ«çš„åœ°æ–¹ï¼šxxx.xxx.xxx.xxx:xxxx</strong></p><ul><li>å¯åŠ¨shell:</li></ul><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>$ ./manage.py shell
</code></pre></div><p>åœ¨ä½¿ç”¨è‡ªå»ºçš„modelæ—¶å€™ä¸è¦å¿˜è®°import:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=color:#f92672>&gt;&gt;&gt;</span> <span style=color:#f92672>from</span> appName.models <span style=color:#f92672>import</span> YourModel1, YourModel2
</code></pre></div><p>å®˜ç½‘ä¸Šç»™äº†ä¸€ä¸ªåˆ¶ä½œæŠ•ç¥¨è½¯ä»¶çš„éå¸¸è¯¦ç»†çš„<a href=https://docs.djangoproject.com/en/1.11/intro/>æ•™ç¨‹</a>ï¼Œåœ¨æ­¤ä¸å¤šèµ˜è¿°ã€‚</p><h2 id=å°tips>å°tips</h2><ul><li><p><strong>åœ¨è®¾è®¡modelsçš„æ—¶å€™ä¸€å®šè¦è€ƒè™‘æ¯ç±»æ•°æ®ä¹‹é—´çš„å…³ç³»:</strong>
åœ¨Djangoä¸­æœ‰ä¸‰ç§æ•°æ®é—´å…³ç³»ï¼šMany-to-many, Many-to-one, one-to-one, å…·ä½“å‚è§å®˜æ–¹çš„<a href=https://docs.djangoproject.com/en/1.11/topics/db/examples/>documentation</a></p></li><li><p><strong>å……åˆ†åˆ©ç”¨Djangoçš„URL confï¼š</strong>
Djangoæ˜¯å¯ä»¥å¸®åŠ©è‡ªå®šä¹‰url patternçš„ï¼Œä¾‹å¦‚ï¼š</p></li></ul><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python>url(
       <span style=color:#e6db74>r</span><span style=color:#e6db74>&#39;^$&#39;</span>,
       views<span style=color:#f92672>.</span>homepage,
       name<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;homepage&#39;</span>
   ),
</code></pre></div><blockquote><p>ä¾¿æ˜¯ç±»ä¼¼"127.0.0.1:8000/"</p></blockquote><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python>url(
       <span style=color:#e6db74>r</span><span style=color:#e6db74>&#39;^(?P&lt;voteresult_id&gt;[0-9]+)/$&#39;</span>,
       views<span style=color:#f92672>.</span>vote,
       name<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;vote&#39;</span>
   )
</code></pre></div><blockquote><p>ä¾¿æ˜¯ç±»ä¼¼"127.0.0.1:8000/123"</p></blockquote><p>å› æ­¤åœ¨ä½¿ç”¨GET requestçš„æ—¶å€™ä¼šæ–¹ä¾¿å¾ˆå¤š,ä¸è¿‡è¦æ³¨æ„ç”¨æˆ·è¾“å…¥çš„å†…å®¹å¦‚æœåœ¨GETä¸­è¦æ˜¾ç¤ºçš„è¯æ–‡æœ¬è¦åœ¨htmlä¸­ç”¨jsäºŒæ¬¡å¤„ç†æ‰å¯ä»¥ï¼Œé¿å…å‡ºç°ç±»ä¼¼â€œ/ \â€ç­‰ä¼šæ··æ·†çš„å­—ç¬¦ä¸²ã€‚</p><ul><li><p><strong>å¤„ç†HttpResponseå¤šç”¨renderï¼š</strong>
è¿™ä¸ªå°±å¾ˆç›´æ¥äº†ï¼Œä¸ºå•¥äººå®¶ç»™äº†shortcutä¸ç”¨å‘¢ï¼Œä½¿ç”¨renderçš„æ—¶å€™ä¸ç®¡æ˜¯é€šè¿‡ajaxç”Ÿæˆçš„è¿˜æ˜¯æ™®é€šçš„postæˆ–è€…getéƒ½å¯ä»¥æ­£ç¡®çš„åé¦ˆï¼ŒèŠ‚çœäº†å¾ˆå¤šçš„æ—¶é—´ã€‚ï¼ˆä¸è¿‡å‰æè¦å†™å¥½ajaxğŸ˜„)</p></li><li><p><strong>é˜²æ­¢ç”¨æˆ·åˆ·æ–°ç•Œé¢ï¼š</strong>
è¿™ä¸ªå°tipæ˜¯é’ˆå¯¹åœ¨è®¾è®¡å‰ç«¯æ—¶çš„ä¸€ä¸ªé—®é¢˜ï¼Œæˆ‘å¤„ç†çš„æ–¹å¼æ˜¯åœ¨è¿›å…¥é“¾æ¥ä¹‹åå³åˆ»è·³è½¬åˆ°ç¨³å®šç•Œé¢ï¼Œåªè¦åœ¨HTMLä¸­æ·»åŠ </p></li></ul><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-html data-lang=html>window.location.href = &#34;/result/{{vote_item.id}}&#34;;
</code></pre></div><p>ç±»ä¼¼è¿™æ ·çš„å¼ºåˆ¶è·³è½¬å°±å¯ä»¥äº†ï¼Œè¿™ä¹Ÿæ˜¯ç›®å‰æˆ‘è®¤ä¸ºæœ€ç®€å•çš„å¤„ç†æ–¹å¼ï¼Œå½“ç„¶ä½ ä¹Ÿå¯ä»¥ç”¨pythonçš„sessionæ¥é€šè¿‡cacheæ¥åˆ¤æ–­ï¼Œä½†æ˜¯ä¼šå¾ˆéº»çƒ¦ã€‚</p><p>ä»¥åè¿™é‡Œè¿˜ä¼šä¸å®šæœŸçš„æ·»åŠ å°tips</p></div></article></main><div><a class=next href=https://blog.peterchen.xyz/posts/2017-06-29-atman/ title=åˆ›ä¸šå…¬å¸çš„ä½“éªŒ>åˆ›ä¸šå…¬å¸çš„ä½“éªŒ Â»</a></div><aside><div><div><h3>LATEST POSTS</h3></div><div><ul><li><a href=/posts/%E5%B0%8F%E5%86%B7%E7%94%9F%E6%B0%94%E6%8C%87%E5%8D%97/>å°å†·ç”Ÿæ°”æŒ‡å—</a></li><li><a href=/reads/cpp-primer-ch2/>Cpp Primer Chapter 2</a></li><li><a href=/reads/cpp-primer-ch1/>Cpp Primer Chapter 1</a></li><li><a href=/posts/%E8%B4%A9%E5%8D%96%E7%84%A6%E8%99%91%E6%95%99%E7%A8%8B/>è´©å–ç„¦è™‘æ•™ç¨‹</a></li><li><a href=/posts/email-as-a-course/>Emailing as a Course</a></li></ul></div></div></aside><div id=disqus_thread></div><script type=application/javascript>var disqus_config=function(){};(function(){if(["localhost","127.0.0.1"].indexOf(window.location.hostname)!=-1){document.getElementById('disqus_thread').innerHTML='Disqus comments not available by default when the website is previewed locally.';return}var b=document,a=b.createElement('script');a.async=!0,a.src='//blog-zo8ylgqplu.disqus.com/embed.js',a.setAttribute('data-timestamp',+new Date),(b.head||b.body).appendChild(a)})()</script><noscript>Please enable JavaScript to view the <a href=https://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript><a href=https://disqus.com class=dsq-brlink>comments powered by <span class=logo-disqus>Disqus</span></a><footer><p>&copy; 2021 <a href=https://blog.peterchen.xyz/><b>é¢¢é˜³</b></a>.
<a href=https://github.com/advpetc><b>Github</b></a>.
<a href=/imprint><b>Imprint</b></a>.</p></footer></body></html>